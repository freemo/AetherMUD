<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
@if?!Authenticate@ @AddFile?/grinder/failedlogin.cmvp@ @else@
@if?!CheckAuthCode?AUTH_JOURNALS=true@ @AddFile?/grinder/nopriv.cmvp@ @else@
<html>
<head>
	<title>Journal Browser</title>
 	<link rel="grinder icon" href="/images/grinder.ico" >
	<script language=JavaScript>
	<!--
		function Clicked(action)
		{
			document.JOURNAL.action=action;
			document.JOURNAL.JOURNAL.value='';
			document.JOURNAL.JOURNALMESSAGE.value='';
			document.JOURNAL.FUNCTION.value='';
			document.JOURNAL.submit();
		}
		function Clicked1(journal)
		{
			document.JOURNAL.JOURNAL.value=journal;
			document.JOURNAL.JOURNALMESSAGE.value='';
			document.JOURNAL.FUNCTION.value='';
			document.JOURNAL.action="journal.cmvp#"+journal;
			document.JOURNAL.submit();
		}
		function Clicked2(journal,message)
		{
			document.JOURNAL.JOURNAL.value=journal;
			document.JOURNAL.JOURNALMESSAGE.value=message;
			document.JOURNAL.FUNCTION.value='';
			document.JOURNAL.action="journal.cmvp#"+journal;
			document.JOURNAL.submit();
		}
		function Clicked3(journal,message,action)
		{
			document.JOURNAL.JOURNAL.value=journal;
			document.JOURNAL.JOURNALMESSAGE.value=message;
			document.JOURNAL.FUNCTION.value=action;
			document.JOURNAL.action="journal.cmvp#"+journal;
			document.JOURNAL.submit();
		}
		function sfideas()
		{
			document.JOURNAL.action="sfideas.cmvp";
			document.JOURNAL.submit();
		}
	//-->
	</script>
</head>
<body BGCOLOR=BLACK>
	<TABLE WIDTH=100% BORDER=0><TR><TD WIDTH=33% ALIGN=LEFT VALIGN=TOP>
	</TD>
	<TD WIDTH=33% ALIGN=CENTER VALIGN=TOP><IMG SRC="/grinder/images/grinder.gif" WIDTH=78 HEIGHT=122 ALT="" BORDER="0"></TD>
	<TD WIDTH=33% ALIGN=RIGHT VALIGN=TOP><INPUT TYPE=BUTTON NAME=BACK VALUE="MUDGrinder Menu" ONCLICK="Clicked('/grinder/loggedin.cmvp');"></TD></TR>
	</TABLE>
<CENTER>
<FORM NAME=JOURNAL TARGET=_top METHOD=POST ACTION="journal.cmvp">
<INPUT TYPE=HIDDEN NAME=AUTH VALUE="@Authenticate?AUTH@">
<INPUT TYPE=HIDDEN NAME=JOURNAL VALUE="@RequestParameter?JOURNAL@">
<INPUT TYPE=HIDDEN NAME=JOURNALMESSAGE VALUE="@RequestParameter?JOURNALMESSAGE@">
<INPUT TYPE=HIDDEN NAME=FUNCTION VALUE="">
<TABLE WIDTH=100% BORDER=1>
	<TR><TD WIDTH=100% COLSPAN=2 BGCOLOR=WHITE ALIGN=CENTER><FONT COLOR=BLACK><H2>CoffeeMud @MudServerVersion@ Journal Browser<a href="javascript:sfideas();"><FONT COLOR=WHITE>.</FONT></a></H2></FONT></TD></TR>
		@AddRequestParameter?OLDJOURNAL=@@RequestParameter?JOURNAL@@ @
		@AddRequestParameter?OLDMESSAGE=@@RequestParameter?JOURNALMESSAGE@@ @
		@JournalNext?RESET@
		@loop@
			@JournalNext@
		    <TR><TD WIDTH=30% VALIGN=TOP>
			<a name="@JournalName@" href="javascript:Clicked1('@JournalName@')"><FONT COLOR=YELLOW>@JournalName@</FONT></a>
			@if?CheckReqParm?JOURNAL=@@RequestParameter?OLDJOURNAL@@ @
				@if?CheckReqParm?FUNCTION=DELETE@
				<CENTER><FONT COLOR=RED><B>@JournalFunction?DELETE@</B></FONT></CENTER>
				@endif@
				@if?CheckReqParm?FUNCTION=TRANSFER@
				<CENTER><FONT COLOR=RED><B>@JournalFunction?TRANSFER@</B></FONT></CENTER>
				@endif@
				@if?CheckReqParm?FUNCTION=EMAIL@
				<CENTER><FONT COLOR=RED><B>@JournalFunction?EMAIL@</B></FONT></CENTER>
				@endif@
				@if?CheckReqParm?FUNCTION=NEWPOST@
				<CENTER><FONT COLOR=RED><B>@JournalFunction?NEWPOST@</B></FONT></CENTER>
				@endif@
				@AddRequestParameter?OLDMESSAGE=@@RequestParameter?JOURNALMESSAGE@@ @
			
				@JournalMessageNext?RESET@
				<UL>
				@loop@
					@JournalMessageNext@
					<LI><a href="javascript:Clicked2('@JournalName@','@RequestParameter?JOURNALMESSAGE@')">
					<FONT COLOR=YELLOW>
					@AddRequestParameter?DISPLAYMSGNUM=@@RequestParameter?JOURNALMESSAGE@@ @
					@AddRequestParameter?DISPLAYMSGNUM=++@
					@RequestParameter?DISPLAYMSGNUM@
					</FONT>
					<FONT COLOR=WHITE>. @JournalInfo?SUBJECT@
					</FONT>
					</a>
				@back@
				</UL>
				</TD>
				<TD WIDTH=70% VALIGN=TOP>
				@AddRequestParameter?JOURNALMESSAGE=@@RequestParameter?OLDMESSAGE@@ @
				@AddRequestParameter?JOURNAL=@@RequestParameter?OLDJOURNAL@@ @
				
				@if?!CheckReqParm?JOURNAL=@
					@if?CheckReqParm?FUNCTION=POSTNEW@
						<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
						<TR>
							<TD WIDTH=20%><FONT COLOR=YELLOW>To: </FONT>
							</TD>
							<TD WIDTH=80%><INPUT TYPE=TEXT SIZE=30 MAXLENGTH=50 NAME=TO VALUE="ALL"></TD>
						</TR>
						<TR>
							<TD><FONT COLOR=YELLOW>Subject: </FONT></TD>
							<TD><INPUT TYPE=TEXT SIZE=30 MAXLENGTH=50 NAME=SUBJECT></TD>
						</TR>
						</TABLE>
						<TEXTAREA NAME=NEWTEXT ROWS=10 COLS=60 WRAP=VIRTUAL></TEXTAREA>
						<BR>
						<INPUT TYPE=BUTTON NAME=SUBMITPOST VALUE="Submit Post" ONCLICK="Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','NEWPOST');">
					@else@
					@if?CheckReqParm?FUNCTION=POSTREPLY@
						<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
						<TR>
							<TD WIDTH=20%><FONT COLOR=YELLOW>Message: </FONT>
							</TD>
							<TD WIDTH=80%><FONT COLOR=WHITE>#@RequestParameter?JOURNALMESSAGE@</FONT></TD>
						</TR>
						<TR>
							<TD><FONT COLOR=YELLOW>From: </FONT></TD>
							<TD><FONT COLOR=WHITE>@JournalInfo?FROM@</FONT></TD>
						</TR>
						<TR>
							<TD><FONT COLOR=YELLOW>To: </FONT></TD>
							<TD><FONT COLOR=WHITE>@JournalInfo?TO@</FONT></TD>
						</TR>
						<TR>
							<TD><FONT COLOR=YELLOW>Date: </FONT></TD>
							<TD><FONT COLOR=WHITE>@JournalInfo?DATE@</FONT></TD>
						</TR>
						<TR>
							<TD><FONT COLOR=YELLOW>Subject: </FONT></TD>
							<TD><FONT COLOR=WHITE>@JournalInfo?SUBJECT@</FONT></TD>
						</TR>
						</TABLE>
						<HR>
						<FONT COLOR=WHITE>@JournalInfo?MESSAGE@</FONT><P>
						<HR>
						
						<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
						<TR><TD WIDTH=100% COLSPAN=2><FONT COLOR=YELLOW>POST REPLY</FONT></TD></TR>
						<TR>
							<TD WIDTH=20%><FONT COLOR=YELLOW>Subject: </FONT></TD>
							<TD WIDTH=80%><FONT COLOR=WHITE>@JournalInfo?SUBJECT@</FONT></TD>
						</TR>
						</TABLE>
						<TEXTAREA NAME=NEWTEXT ROWS=10 COLS=60 WRAP=VIRTUAL></TEXTAREA>
						<TABLE WIDTH=100% BORDER=0>
						<TR>
						<TD WIDTH=33% ALIGN=LEFT>
							<INPUT TYPE=BUTTON NAME=SUBMITPOST VALUE="Submit" ONCLICK="Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','REPLY');">
						</TD>
						<TD WIDTH=33% ALIGN=LEFT>
						</TD>
						<TD WIDTH=33% ALIGN=LEFT>
							<INPUT TYPE=BUTTON NAME=SUBMITPOST VALUE="Cancel" ONCLICK="Clicked2('@JournalName@','@RequestParameter?JOURNALMESSAGE@');">
						</TD>
						</TR>
						</TABLE>
					@else@
					@if?CheckReqParm?FUNCTION=POSTEMAIL@
						<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
						<TR>
							<TD WIDTH=20%><FONT COLOR=YELLOW>To: </FONT>
							</TD>
							<TD WIDTH=80%><FONT COLOR=WHITE>@JournalInfo?FROM@</FONT></TD>
						</TR>
						<TR>
							<TD><FONT COLOR=YELLOW>Subject: </FONT></TD>
							<TD><FONT COLOR=WHITE>RE: @JournalInfo?SUBJECT@</FONT></TD>
						</TR>
						</TABLE>
						<TEXTAREA NAME=NEWTEXT ROWS=10 COLS=60 WRAP=VIRTUAL>You wrote:
@JournalInfo?MESSAGE&PLAIN&NOREPLIES@
-----------------------------------------------------
</TEXTAREA>
						<TABLE WIDTH=100% BORDER=0>
						<TR>
						<TD WIDTH=33% ALIGN=LEFT>
							<INPUT TYPE=BUTTON NAME=SUBMITPOST VALUE="Submit" ONCLICK="Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','EMAIL');">
						</TD>
						<TD WIDTH=33% ALIGN=LEFT>
						</TD>
						<TD WIDTH=33% ALIGN=LEFT>
							<INPUT TYPE=BUTTON NAME=SUBMITPOST VALUE="Cancel" ONCLICK="Clicked2('@JournalName@','@RequestParameter?JOURNALMESSAGE@');">
						</TD>
						</TR>
						</TABLE>
					@else@
						@if?!CheckReqParm?JOURNALMESSAGE=@
							@if?CheckReqParm?FUNCTION=REPLY@
							<CENTER><FONT COLOR=RED><B>@JournalFunction?REPLY@</B></FONT></CENTER>
							@endif@
							<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
							<TR>
								<TD WIDTH=20%><FONT COLOR=YELLOW>Message: </FONT>
								</TD>
								<TD WIDTH=80%><FONT COLOR=WHITE>#@RequestParameter?JOURNALMESSAGE@</FONT></TD>
							</TR>
							<TR>
								<TD><FONT COLOR=YELLOW>From: </FONT></TD>
								<TD><FONT COLOR=WHITE>@JournalInfo?FROM@</FONT></TD>
							</TR>
							<TR>
								<TD><FONT COLOR=YELLOW>To: </FONT></TD>
								<TD><FONT COLOR=WHITE>@JournalInfo?TO@</FONT></TD>
							</TR>
							<TR>
								<TD><FONT COLOR=YELLOW>Date: </FONT></TD>
								<TD><FONT COLOR=WHITE>@JournalInfo?DATE@</FONT></TD>
							</TR>
							<TR>
								<TD><FONT COLOR=YELLOW>Subject: </FONT></TD>
								<TD><FONT COLOR=WHITE>@JournalInfo?SUBJECT@</FONT></TD>
							</TR>
							</TABLE>
							<HR>
							<FONT COLOR=WHITE>@JournalInfo?MESSAGE@</FONT><P>
							<HR>
							<TABLE WIDTH=100% BORDER=0>
							<TR VALIGN=TOP>
							<TD WIDTH=51% ALIGN=LEFT VALIGN=TOP>
								@if?CheckAuthCode?AUTH_JOURNALS=true@
								<INPUT TYPE=BUTTON NAME=TRANSFER VALUE="Transfer TO:" ONCLICK="if(document.JOURNAL.NEWJOURNAL.selectedIndex>=0)Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','TRANSFER');">
								@AddRequestParameter?THISJOURNAL=@@RequestParameter?JOURNAL@@ @
								<SELECT NAME=NEWJOURNAL>
								@JournalNext?RESET@
								@loop@
									@JournalNext@
									<OPTION VALUE="@JournalName@">@JournalName@
								@back@
								</SELECT>
								@AddRequestParameter?JOURNAL=@@RequestParameter?THISJOURNAL@@ @
								@endif@
							</TD>
							<TD WIDTH=17% ALIGN=CENTER VALIGN=TOP>
								<INPUT TYPE=BUTTON NAME=REPLY VALUE="Reply" ONCLICK="Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','POSTREPLY');">
							</TD>
							<TD WIDTH=17% ALIGN=CENTER VALIGN=TOP>
							@if?JournalInfo?EMAILALLOWED@
								<INPUT TYPE=BUTTON NAME=EMAIL VALUE="Email" ONCLICK="Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','POSTEMAIL');">
							@endif@
							</TD>
							<TD WIDTH=17% ALIGN=CENTER VALIGN=TOP>
								<INPUT TYPE=BUTTON NAME=DELETE VALUE="Delete" ONCLICK="if(confirm('Delete this message?'))Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','DELETE');">
							</TD>
							</TR>
							</TABLE>
						@else@
							<INPUT TYPE=BUTTON NAME=ADDNEW VALUE="Compose New Message" ONCLICK="Clicked3('@RequestParameter?JOURNAL@','@RequestParameter?JOURNALMESSAGE@','POSTNEW');">
						@endif@
					@endif@
					@endif@
					@endif@
				@endif@
				</TD>
			@else@
			<TD><BR></TR>
			@endif@
		@back@
</TABLE>
	<P>
	<TABLE WIDTH=100% BORDER=0>
	<TR>
	<TD WIDTH=100% ALIGN=CENTER>
	@AddRequestParameter?JOURNALMESSAGE=@@RequestParameter?OLDMESSAGE@@ @
	@AddRequestParameter?JOURNAL=@@RequestParameter?OLDJOURNAL@@ @
	<INPUT TYPE=BUTTON NAME=REFRESH VALUE="REFRESH" ONCLICK="Clicked2('@JournalName@','@RequestParameter?JOURNALMESSAGE@');">
	</TD>
	</TR>
	</TABLE>
</FORM>
</BODY>
</HTML>
@endif@
@endif@

