<HTML>
<HEAD>
<META NAME="GENERATOR" Content="Microsoft Visual Studio 6.0">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><B>The CoffeeMUD&nbsp;SMTP Server:</B><BR>The CoffeeMUD&nbsp;SMTP Server is a 
simple mail transfer program which&nbsp;acts as&nbsp;server that runs as part of 
CoffeeMUD.&nbsp; It's primary purpose is to act as a mail forwarding and relay 
engine for email between mud users, and as a distribution point for mailing 
lists and other email related functions.</P>
<P><STRONG>How to Connect:</STRONG><BR>By default, the&nbsp;smtp&nbsp;server&nbsp;listens on port 
port 25 by default.&nbsp; Changing this port value 
is generally a bad idea which will almost certainly 
eliminate the ability for your server to receive mail from others.</P>
<P>Messages sent either directly or indirectly to the CoffeeMud SMTP Server MUST 
follow ALL of&nbsp;these rules or face rejection:</P>
<UL>
  <LI>The email MUST be formatted in PLAIN TEXT 
  <LI>The DOMAIN must be correctly defined in the SMTP 
  Server INI file (email.ini) 
  <LI>The email must be from: 
  <UL>
    <LI>a coffeemud journal name listed under JOURNALS in 
    the&nbsp;SMTP Server&nbsp;INI file (email.ini)&nbsp; 
    <LI><STRONG>OR</STRONG>&nbsp;a coffeemud journal name&nbsp; at the local 
    domain: example: My_Journal<A 
    href="mailto:My_Journal@coffeemud.homeip.net">@coffeemud.homeip.net</A>&nbsp; 

    <LI><STRONG>OR</STRONG>&nbsp;a 
    local player name 
    <LI><STRONG>OR</STRONG> a local player name at the local domain: example: <A 
    href="mailto:brutus@coffeemud.homeip.net">brutus@coffeemud.homeip.net</A>
    <LI><STRONG>OR</STRONG>&nbsp;the email address which a player has on file in 
    their account. </LI></UL>
  <LI>The email must be addressed to: 
  <UL>
    <LI>a coffeemud journal name&nbsp; at the local domain: example: 
    My_Journal<A 
    href="mailto:My_Journal@coffeemud.homeip.net">@coffeemud.homeip.net</A>&nbsp; 

    <LI><STRONG>OR</STRONG> a local player name at the local domain: example: <A 
    href="mailto:brutus@coffeemud.homeip.net">brutus@coffeemud.homeip.net</A>
    <LI><STRONG>OR</STRONG>&nbsp;the email address which a player has on file in 
    their account.</LI></UL>     </LI></UL>
<P><BR><BR><B>What it does and doesn't do:<BR></B>It&nbsp;accepts&nbsp;mail for 
storage and eventual delivery if&nbsp;the security&nbsp;conditions are 
met.&nbsp; It maintains mailing lists for journals.&nbsp; It provides security 
against illegal postings to journals or mailing lists.&nbsp; It delivers emails 
to where they need to go, and distributes mailing list messages to where they 
need to go.&nbsp; </P>
<P>It does not handle SMTP compliant mailing lists, and will only deal with 
plain text messages due to journal interactions.&nbsp; <BR><BR>It supports HELO, 
EHLO, RCPT, MAIL, HELP, QUIT, NOOP, RSET, DATA, and DSN.</P>
<P>It does not support EXPN, VRFY,&nbsp;VERB,&nbsp;ETRN, or any expanded 
parameters to either MAIL or RCPT.</P>
<P> </P>
<P><B>Security:</B><BR>The SMTP Server&nbsp;may be&nbsp;bound to 127.0.0.1 
(localhost) - this means it will not accept external connections.</P>
<P>The SMTP Server only allows messages FROM valid users or journals TO valid 
users or journals.&nbsp; All security checking is done as the message is 
arriving, so there is no chance of an invalid message taking up disk space, much 
less being relayed.&nbsp; It doesn't get any more secure than that.<BR></P>
<P><B>Configuration:</B><BR>The default installation of CoffeeMUD has two 
inbuilt web servers, named 'pub' and 'admin'. The web servers are enabled with 
the line 'RUNWEBSERVERS=true' in 'coffeemud.ini'; any other value or the 
abscence of this line will cause the web servers not to be loaded.</P>
<P>INI files for the web servers live in the 'web/' directory off the CoffeeMUD 
root; by default, all pages to be served go in <I>web/(servername)/</I>, though 
this can be overridden. Options are placed in either 'web/common.ini' or 
'web/(servername).ini'; an option in the latter will override one in common. The 
options are: </P>
<UL>
  <LI><B>PORT</B>=xx : <B>[REQUIRED]</B> <I> (e.g.25)</I> 
  Sets the port number the&nbsp;server will listen for SMTP requests on; this 
  cannot be the same port as the main MUD server or web servers. Identical to 
  MUD server usage.&nbsp;There is normally no good reason&nbsp;to change from 
  25, as that is what&nbsp;email clients will expect.&nbsp; 
  <LI><B>BACKLOG</B>=xx : <I> (e.g.10)</I> Sets the number of requests 
  that can be queued by the internal TCP/IP stack. Identical to MUD server 
  usage. 
  <LI><B>BIND</B>=addr : <I> (e.g.127.0.0.1)</I> Causes the server to be bound to a 
  specific address; this is useful on multi-homed machines or if you wish to 
  prevent public access to the pages. Identical to MUD server usage. 
  <LI><STRONG>DOMAIN</STRONG>=email domain&nbsp;: <B>[REQUIRED]</B>&nbsp;This is your servers domain for the 
  purposes of interpreting local email addresses.&nbsp; It should be identical 
  to your servers domain.&nbsp; For instance, if your server is 
  myserver.myhost.com, then so should this value.&nbsp; Email&nbsp;addressed to 
  your mud would then be <A 
  href="mailto:playername@myserver.myhost.com">playername@myserver.myhost.com</A>.&nbsp; 
  This domain must match the incoming mail addresses to be accepted. 
  <LI><STRONG>FORWARD</STRONG>=trueorfalse <EM>(e.g. 
  TRUE)</EM> Should be set to true or false.&nbsp; 
  If TRUE, mail will be forwarded to players and mailing lists as the mail 
  becomes available.&nbsp;&nbsp;A player will have their mail forwarded to them ONLY if their AUTOFORWARD flag is set.&nbsp; 
  If this option is FALSE, the server will not forward mail no 
  matter what the players AUTOFORWARD flag is, but will act as a mail accumulator 
  only. 
  <LI><STRONG>MAILBOX</STRONG>=journalname <EM>(e.g. The 
  EMail Box)</EM> This is the name of your private email Journal.&nbsp; All 
  private email, from player to player, is stored in this journal.&nbsp; A 
  GenJournal item of this name can be created in-game to provide in-game access 
  to email for players who do not have AUTOFORWARD turned on.&nbsp; Otherwise, 
  when FORWARD is true, and the player has AUTOFORWARD turned on, email will 
  remain in this box only until it can be successfully sent to the players 
  private email address. 
  <LI><STRONG>EMAILDAYS</STRONG>=xx <EM>(e.g. 30)</EM> This 
  is the maximum number of days a message will remain in the MAILBOX above for 
  any reason. 
  <LI><STRONG>FAILUREDAYS</STRONG>=xx<EM> (e.g. 5)</EM> 
  This is the number of days that&nbsp;your server will attempt to forward a 
  message to a private email address before giving up.&nbsp; &nbsp; 
  <LI><STRONG>MAXMSGS</STRONG>=xx <EM>(e.g. 100)</EM> This 
  is the maximum number of private emails which will be stored in the MAILBOX 
  for each player.&nbsp; Use 0 for unlimited. 
  <LI><STRONG>MAXMSGSIZE</STRONG>=xx <EM>(e.g. 20000)</EM> 
  This is the maximum number of bytes for each email sent.&nbsp; No email 
  arriving through your server may exceed this size. 
  <LI><STRONG>JOURNALS</STRONG>=coded 
  list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR><BR><EM>e.g. Local Chat, The Elf 
  Journal (forward keepall -RACE +Elf), Announcements (forward)<BR><BR></EM>This 
  is the name of one of more GenJournal (see Archon Guide). Each&nbsp;entry 
  should be comma delimited. The mails sent to a journal name will 
  appear&nbsp;as TO ALL messages in the designated journal. The names listed 
  here are case&nbsp;sensitive with respect to your GenJournal names. Mail may 
  be sent to journal&nbsp;names with spaces by substituting an unscore "_" for 
  each space. For instance,&nbsp;to send an email to a journal called "The 
  Journal" at the domain "mydomain.com",&nbsp;you would address it as: <A 
  href="mailto:The_Journal@mydomain.com">The_Journal@mydomain.com</A>&nbsp;.<BR><BR>For 
  each journal entry, parameters may follow the name, so long as they&nbsp;are 
  enclosed in parenthesis. ().<BR><BR>The parameters may include the word 
  'forward' if you would like emails&nbsp;to be forwarded to the private mail 
  boxes whose names are maintained in&nbsp;resources/emaillists.txt. Nonmembers 
  may post a message to the journal # or send an email with "subscribe" as the 
  subject to subscribe. Members&nbsp;may likewise use "unsubscribe" to remove 
  their names.&nbsp;<BR><BR>The Parameters should include the word 
  'subscribeonly' if posts to the&nbsp;list are not accepted, but 
  subscribe/unsubscribe messages are. This&nbsp;parameter should always be used 
  with the 'forward' parameter.&nbsp;<BR><BR>The Parameters should include the 
  word 'keepall' if posts to the journal&nbsp;are saved in the journal archives 
  instead of automatically deleted after&nbsp;forwarding. Like 'subscribeonly', 
  this parameter ONLY matters when 'forward'&nbsp;is included. Posts to journals 
  are never deleted unless 'forward' is set.&nbsp;See the JOURNALDAYS ini entry 
  below for ways to delete these messages even&nbsp;when 'keepall' is 
  included.<BR><BR>&nbsp;Parameters may also include Zapper masks to control 
  subscription&nbsp;and/or posting criteria. Use AHELP Prop_HaveZapper to list 
  the&nbsp;valid Zapper mask parameters. 
  <LI><STRONG>JOURNALDAYS</STRONG>=          
           xx (e.g. 90) This is the 
  number of maximum number of days a message will remain in an smtp server managed 
  JOURNAL before being deleted. </LI>
  <LI><STRONG>SUBSCRIBEDTITLE</STRONG>=xx <EM>(e.g. You are now subscribed)</EM> This is the 
  title of the response your SMTP server will automatically send to users who subscribe to 
  a journal by sending an email to the journal with "subscribe" as the title.</LI>
  <LI><STRONG>SUBSCRIBEDMSG</STRONG>=xx <EM>(e.g. You are now subscribed to &lt;NAME&gt;)</EM> This is the 
  body of the response your SMTP server will automatically send to users who subscribe to 
  a journal by sending an email to the journal with "subscribe" as the title.  You may use
  the code &lt;NAME&gt; as a placeholder for your journals name.</LI>
  <LI><STRONG>UNSUBSCRIBEDTITLE</STRONG>=xx <EM>(e.g. You are now unsubscribed)</EM> This is the 
  title of the response your SMTP server will automatically send to users who unsubscribe to 
  a journal by sending an email to the journal with "unsubscribe" as the title.</LI>
  <LI><STRONG>UNSUBSCRIBEDMSG</STRONG>=xx <EM>(e.g. You are now unsubscribed from &lt;NAME&gt;)</EM> This is the 
  body of the response your SMTP server will automatically send to users who unsubscribe to 
  a journal by sending an email to the journal with "unsubscribe" as the title.  You may use
  the code &lt;NAME&gt; as a placeholder for your journals name.</LI>
  </UL> 
  <P>          
                 
                 
      </P>

</BODY>
</HTML>
