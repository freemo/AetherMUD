<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
 
  <meta name="GENERATOR" content="Microsoft Visual Studio 6.0">
  <title></title>
</head>
 <body>
 
<p style="text-align: center;" align="center"> <font size="6">Installing
and Using<br>
<strong>    CoffeeMud 5.0</strong></font></p>
 <img src="images/zip.jpg">
 
<p><strong><font size="5">Installation:</font></strong></p>
 
<p>The first and most critical step in installing CoffeeMud  5.0 is to make
sure that you have downloaded and installed the latest version of  the Sun
Java SDK.&nbsp; As of this writing, that version is Java 1.5.0.&nbsp; CoffeeMud
uses the  latest Sun classes, so stay up to date!&nbsp; If you are using
some flavor of Unix or Linux instead of Windows, make  sure you aren't trying
to get by with GCJ -- CoffeeMud  (and Sun) do not support it.</p>
 
<p>Now, if you are upgrading from a previous version of CoffeeMud, you need
to stop  here and skip ahead to the section on upgrading.&nbsp; If this  is
your first installation, keep reading.</p>
 
<p>You will now need to&nbsp;unpack the CoffeeMud.zip package into a directory
 on your hard drive.&nbsp; This directory may be called, for instance,  "CoffeeMud".</p>
 
<p>If you are using a UNIX/Linux system, you should now  bring up a console
and cd to whatever directory you unpacked CoffeeMud to.&nbsp;  Make sure
you can  write to mudUNIX.sh by issung the the command <strong>chmod 766
 mudUNIX.sh&nbsp;</strong>&nbsp; Now,&nbsp;enter&nbsp;<strong>sh  InstallUNIX.sh</strong>&nbsp;
Follow the prompts by inputting the directory of  JAVA; do not enter a trailing
slash, for instance:  <strong>/opt/j2sdk/j2sdk1.4.2</strong>&nbsp; Continue
following the prompts:  Say&nbsp;<strong>y</strong> if you want to compile
the main  program,&nbsp;<strong>n</strong> if you don't. Enter the name of
your new MUD  (this only works FIRST RUN; you cannot use this to change MUD's
name in the  FUTURE). Say&nbsp;<strong>y</strong> if you want to start your
MUD now, and  <strong>n</strong> if you don't. Hit enter after the nohup
comes up.&nbsp; Send  an email to <a href="mailto:wrichter@att.net">wrichter@att.net</a>&nbsp;if
you have any problems with  this script.</p>
 
<p>If you are using Windows, or you are using UNIX/Linux and have completed
the  above instructions...</p>
 
<p align="center"><strong><font size="6">Congratulations!</font></strong></p>
 
<p align="left">You have successfully installed CoffeeMud.&nbsp; </p>
 
<p align="left">You may wish, at this point, to investigate the settings
and components of the CoffeeMud server.&nbsp;  If so, by all means, continue
reading this document.&nbsp; If you couldn't  care less, then go into the
your CoffeeMud directory on a&nbsp;command line or&nbsp;DOS  prompt&nbsp;and
enter (for Windows or DOS users):</p>
 
<p align="left"><font face="Courier New"><font size="2"><strong> java -classpath
 ".;.\lib\js.jar"</strong> <strong>-Xmx85535000  com.planet_ink.coffee_mud.application.MUD&nbsp;"Your
Muds Name"</strong></font></font></p>
 
<p align="left">                                                        
    And for Unix, Linux, or FreeBSD users, the  command differs only    
                                                                        
         in the classpath:</p>
 
<p align="left"><font face="Courier New"><font size="2"><strong> java -classpath
".:./lib/js.jar"</strong>  <strong>-Xmx85535000 com.planet_ink.coffee_mud.application.MUD&nbsp;"Your
Muds  Name"</strong></font></font></p>
 
<p align="left">                                                        
    This will start up the CoffeeMud  server.&nbsp;Remember to change the
"Your Muds Name" text at the end to the  unique name you want to give your
mud.&nbsp; If you are running Windows, you  might also get away with first
modifying the file <b>mud.bat</b> using Notepad, and  then&nbsp;executing
that&nbsp;file.&nbsp; If you are running some flavor of  FreeBSD, Unix, or
Linux, you also have a mudLINUX.sh you may first modify, then  make executable
using the command <strong>chmod 755 mudLINUX.sh, </strong>and then  execute.</p>
 
<p align="left">Now, connect to the server on port&nbsp;5555 using your telnet
or  other MUD client.&nbsp; Create yourself a new character.&nbsp; This new
 character will be your administrative player, or Archon, so most of the
player  settings, such as class, race, stats, etc. won't matter much.&nbsp;
When your  character logs in for the first time, you will see a book in a
room.&nbsp; Your  player should pick up the book and read it.&nbsp; The commands
to do this  are:</p>
 
<p align="left"><b>get book</b></p>
 
<p align="left"><b>read book</b></p>
 
<p align="left">  Doing this will turn your player into an Archon.&nbsp;
 An Archon is an all-powerful administrative player who is capable of all
manner  of magical conjurations. You will probably want to  import a bunch
of areas into your database right away.&nbsp; If so,  you should enter:</p>
 
<p align="left"><b>                                                     
                               ahelp import</b></p>
 
<p align="left">                                                        
        This will tell you how  to import *.CMARE files, which are CoffeeMud
formatted area files.&nbsp; Other formats are  supported as well.<br>
</p>
<p align="left">If you'd like to actually learn how to use the CoffeeMud
engine, you should do the following:</p>
<p align="left"><font color="#ff6666"><b>o Finish reading this document<br>
o Review the <a href="../coffeemud.ini">coffeemud.ini</a> file, or use the
<a href="MUDGrinder.html">MudGrinders</a> Control Panel<br>
o Read the <a href="ArchonGuide.html">Archon's Guide</a><br>
o Read the <a href="BuildersFAQ.html">Builders FAQ</a>.<br>
  o Read the <a href="WebServer.html">Web Server Guide</a>.<br>
  o Read the <a href="SMTPServer.html">SMTP Server Guide</a>.<br>
  o Read the <a href="Programming.html">Programmers Guide</a>.<br>
</b></font>    <br>
</p>
<p align="left">Otherwise,  once you have your administrator and a few areas,
you are technically  ready to play!&nbsp;</p>
   
<p><strong><img src="images/mug.jpg">
</strong> </p>
 
<p><strong><font size="5">Upgrading From a Previous Version of  CoffeeMud</font></strong></p>
 
<p>There are three upgrade paths,&nbsp;one&nbsp;where&nbsp;the database schema
 was not changed&nbsp;(4.5.0 to 4.5.1), and two others where the database
 schema was changed (i.e. 4.7 to 5.0)&nbsp;.&nbsp; If you are unsure, or
don't  know how to tell, go ahead and follow the changed database schema
process.</p>
 
<p><em>Unchanged Database Schema Process</em></p>
 
<p>If you are upgrading to a version where the&nbsp;database schema has  (presumably)
not changed, you still must expect that many other things probably  have.&nbsp;&nbsp;
Therefore, follow these steps:</p>
 
<p><strong>1.</strong> First go into the directory that contains your olde
 version of CoffeeMud and obliterate the entire "com" path.&nbsp; Just wipe
it  away.&nbsp; You won't need it, and it will just cause problems anyway.&nbsp;
If  you had any custom classes in there, you might want to pull them out
first and  copy them elsewhere.</p>
 
<p><strong>2.</strong> Next, save away (in another directory) your coffeemud.ini
 file, and perhaps your mud.bat or mudLINUX.bat .&nbsp; Also save away&nbsp;any
 files in the resources or web&nbsp;directory you might have customized to
your  mud, including perhaps your resources/text/intro.txt file for instance.</p>
 
<p><strong>3.</strong> Now unpack/unzip the new version of CoffeeMud on TOP
of  your olde one.</p>
 
<p><strong>4.</strong> Open up the coffeemud.ini file that comes with the
new  version and also open up your olde customized coffeemud.ini file you
saved away  in step 2.&nbsp; Copy over from the old&nbsp;ini file&nbsp;the
settings that  differ from the new one.&nbsp; The idea here is that the new
coffeemud.ini file  may contain new settings you need to be aware of.&nbsp;
However, your old custom  settings will still apply in the new version --
especially your database  settings for instance.</p>
 
<p><strong>5.</strong> Copy your intro.txt on top of the one from the new
 build.&nbsp; As in step 4, merge any other files back into their counterparts
in  the new build.</p>
 
<p><strong>6. </strong>Smile, you are done.</p>
 
<p><em>Changed FakeDB Database Schema Process</em></p>
 
<p>If you are upgrading to a version with an updated database  schema,&nbsp;follow
the&nbsp;correct instructions for your database type.&nbsp;  If you are using&nbsp;fakedb,
follow the instructions below.&nbsp; If you don't  know whether or not you
are using fakedb, then you ARE using fakedb and should  follow these instructions:</p>
 
<p><strong>1. </strong>Go into the CoffeeMud directory for your olde version
and  copy the entire fakedb data directory to somewhere else on your hard
drive.&nbsp;  On CoffeeMud versions 1.2 - 4.7, your fakedb data directory
is located in your coffeemud folder in the "data" directory.  In versions
5.0 and higher, it is  located in your coffeemud folder in the "resources/fakedb"
directory.  You should see a file called fakedb.schema, along with numerous
fakedb.data.* files.  Copy them all,  and remember where you put them! </p>
 
<p><strong>2.</strong> Go back to the beginning of this section and follow
steps  1 through 5 from the <em>unchanged database schema</em> process.</p>
 
<p><strong>3.&nbsp;</strong>From the command line, go into your CoffeeMud
 directory, and from there into fakedb data directory.&nbsp; Delete all the
files  matching fakedb.data.*&nbsp; Do NOT delete the&nbsp;fakedb.schema!
If everything  went well, the new fakedb.schema from the new version of CoffeeMud
is still in  your fakedb data directory.&nbsp;</p>
 
<p><strong>4.</strong> Still from the command line, go into your CoffeeMud
 directory and enter the following:</p>
 
<p><strong>java com.planet_ink.fakedb.DBUpgrade</strong></p>
 
<p><strong>5. </strong>Follow the instructions for this little program.</p>
 
<p><strong>6. </strong>Smile, you are done.</p>
 
<p><em>Changed Database Schema Process (not FakeDB)</em></p>
 
<p>Now, if you are upgrading to a version with an updated database schema
and  you are NOT using fakedb, but are using Access, SQL Server, MySQL, or
some other  database, follow these instructions:</p>
 
<p><strong>1.</strong>Go into the CoffeeMud directory for your olde version
and  copy the entire fakedb data directory to somewhere else on your hard
drive.&nbsp;  On CoffeeMud versions 1.2 - 4.7, your fakedb data directory
is located in your coffeemud folder in the "data" directory.  In versions
5.0 and higher, it is  located in your coffeemud folder in the "resources/fakedb"
directory.  You should see a file called fakedb.schema, along with numerous
fakedb.data.* files.  Copy them all,  and remember where you put them! &nbsp;
Even though you aren't using FakeBD, you will  still need to copy FakeDB's&nbsp;schema
for use with the upgrade  application.</p>
 
<p><strong>2.</strong>Go back to the beginning of this section and follow
steps  1 through 5 from the <em>unchanged database schema</em>  process.</p>
 
<p><strong>3. </strong>Following the instructions provided by your database
 system, create a brand NEW database for the new version of  CoffeeMud.&nbsp;&nbsp;You
will need to use the appropriate database schema  provided in the new version
of CoffeeMud to do this.&nbsp; If you have forgotten  what this means, consult
the section of this document dealing with the CoffeeMud  Database.&nbsp;
Make sure you preserve your olde CoffeeMud database from the  olde version!</p>
 
<p><strong>4. </strong>From the command line, go into your CoffeeMud directory
 and enter the following from the command line:</p>
 
<p><strong>java com.planet_ink.fakedb.DBUpgrade</strong></p>
 
<p><strong>5. </strong>Follow the instructions for this little program.</p>
 
<p><strong>6. </strong>Now open up your coffeemud.ini file and make any changes
 necessary to point CoffeeMud to the database for the new version.&nbsp;
This may  require creating a new ODBC data source, or just modifying the
DBSERVICE line,  depending on your database type.</p>
 
<p><strong>7. </strong>Smile, you are done.</p>
 
<p>&nbsp;</p>
 
<p> <img src="images/settings.jpg">
 </p>
 
<p align="left"><strong><font size="5">Settings:</font></strong></p>
 
<p align="left">All of the general purpose settings for the  CoffeeMud server
are kept in the INI file, called "coffeemud.ini".&nbsp; This  file may be
modified with your favorite text editor: notepad, vi, emacs,  copycon, Whatever!&nbsp;
If you are adventurous, you may also specify a custom  ini file other than
"coffeemud.ini" by putting a boot=          myfile.ini entry in your startup
line just before the name  of your mud.&nbsp; Why would you want to?&nbsp;
I don't know, but  you can. </p>
 
<p align="left">      If  you are happy with the standard installation, you
will usually also be  content to leave the INI file alone.&nbsp; You will
eventually, however, probably find a need  to at least modify the "START"
setting.&nbsp; Any changes to the  coffeemud.ini file will require that CoffeeMud
be restarted before the changes will  take effect. </p>
 
<p align="left">      Below are some of the more important  configuration
settings to be aware of in your ini file.&nbsp; There are actually  many
many more, but they just aren't discussed here.&nbsp; The best way to  modify
those "other" settings is through the Control Panel in the <a
 href="MUDGrinder.html">MUDGrinder</a>                                  
                           web site.&nbsp; </p>
 
<p align="left"><em>SYSMSGS, ERRMSGS, DBGMSGS<br>
</em>These entries refer to logged system  messages, logged error messages,
and logged debug messages respectively.&nbsp;  When logging is directed to
a file, that file is called "mud.log".&nbsp; The  possible values for each
of these      settings  is either "ON", which will direct the indicated messages
to the screen  only, "OFF" to disable the messages entirely, "FILE" to direct
the messages to the "mud.log"  file only, or "BOTH" for both screen and file
output.&nbsp; By  default, SYSMSGS and ERRMSGS are set to "BOTH", while DBGMSGS
is set  to "OFF". </p>
 
<p align="left"><em>PORT<br>
</em>This is the TCP/IP port number which the main  CoffeeMud server will
listen on.&nbsp; By default the setting is 5555.&nbsp; If  you would like
to change this number to some other port, you may do so!&nbsp;  <br>
<br>
<em>START<br>
</em>This setting designates the Room ID of the place on  your map where
new players will start off at.&nbsp; It also dictates where  players are
brought to when the Recall skill is used.&nbsp; By default, an  arbitary
room ID has been assigned.&nbsp; Once you've put together a few areas,  you
had better update this setting before new players start  arriving.<br>
<br>
<em>CHANNELS<br>
</em>This is a comma  separated list of channels which the users of your
system may converse publicly  on.&nbsp; An miminum character level may optionally
be specified after each  channel name. &nbsp;The channel names given here
are completely arbitrary and  may be meaningful or whimsical terms, though
the names may not contains  spaces.&nbsp; A couple of standard channels are
specified.&nbsp; The limit for  the number of standard channels plus any
InterMud channels (see <em>I3CHANNELS  </em>                            
                    below) is 16 or 32, I forget.<br>
<br>
<em>BACKLOG</em> <br>
This TCP/IP setting  denotes how many connections can be queued up when the
server is busy. Leave it  at 6.&nbsp; </p>
 
<p align="left"><em>BIND</em> <br>
This TCP/IP setting will limit the IP addresses  which can connect to your
server.&nbsp; It is commented out by default, which  means that everyone
is allowed to connect.&nbsp; Leave it that  way.<br>
<em><br>
RUNI3SERVER<br>
</em>This setting tells CoffeeMud  whether to start up the built-in&nbsp;InterMud3
server and make a connection to  the InterMud router.&nbsp; A value of "TRUE"
will turn on the I3 server and make  the connection.<br>
<br>
<em>I3PORT<br>
</em>This is the TCP/IP port number which  the main&nbsp;InterMud3 server
will listen on.&nbsp; By default the setting is  27766.&nbsp; If you would
like to change this number to some other port, you may  do so.&nbsp; If the
<em>RUNI3SERVER </em>entry above is FALSE, this setting will  have no effect.<br>
<br>
<em>I3STATE<br>
</em>This is a  short description of the state of your mud as you want it
published to the I3  network.&nbsp; A state is typically like "Private",
or "Open to the public", or  "Under Construction", etc.<br>
<br>
<em>I3CHANNELS<br>
</em>This is a comma separated list of  InterMud3 channels which the users
of your system may converse publicly  on.&nbsp; Each channel entry is separated
by a comma.&nbsp; Each entry consists  of a locate channel name (no spaces
in the name), followed by a space, followed  by a minimum character level
to view or chat on the channel, followed by&nbsp; a  space, followed by the
name of the InterMud3 channel to map this local channel  to.&nbsp; A couple
of standard channels are specified.&nbsp; The limit for the  number of standard
channels (see <em>CHANNELS </em>above) plus any InterMud  channels&nbsp;
is 16 or 32, I forget.<br>
<br>
<em>RUNWEBSERVERS<br>
</em>This setting tells CoffeeMud whether to  start up the built-in web servers.&nbsp;
A value of "TRUE" will turn on the web  servers.&nbsp; Even if you don't
wish to publish any of your MUDs information to  the web, you may want to
run the Admin web server so that you can use the  MUDGrinder area editing
tool.&nbsp; See the <a href="MUDGrinder.html">MUDGrinder Guide</a> for more
information on this tool.&nbsp; For more information on the CoffeeMud  web
server in general, please read the <a href="WebServer.html">WebServer Guide</a>. 
<br>
<br>
<em>RUNSMTPSERVER<br>
</em>This setting tells CoffeeMud  whether to start up the built-in&nbsp;smtp
(mail)&nbsp;server.&nbsp; A value of  "TRUE" will turn on the smtp servers.&nbsp;
Even if you don't wish to&nbsp;allow  any incoming mail, you may want to
run the&nbsp;mail server so that you can  create outgoing newsletters for
your players.&nbsp; For more information on the  CoffeeMud&nbsp;smtp server
in general, please read the <a href="SMTPServer.html">SMTPServer Guide</a>.
<br>
<br>
<em>ITEMS, MOBS, BEHAVIORS,  ABILITIES, CHARCLASSES, RACES, COMMANDS, LOCALES,
AREAS, EXITS</em> <br>
These settings each  specify a path on your local drive which will contain
Java class files.&nbsp;  These class files are typically classes which you
might want to use with  your CoffeeMud system, but which are not included
with the standard CoffeeMud  distribution.&nbsp;See the <a
 href="Programming.html">Programmer's Guide</a> for more information on writing
custom classes for CoffeeMud.</p>
 
<p align="left"><em>DBCLASS<br>
</em>This specifies the name of the Java class  which will be used as your&nbsp;JDBC
or ODBC database driver.&nbsp;&nbsp;If you  are using a System ODBC data&nbsp;source,
this entry will typically be  "sun.jdbc.odbc.JdbcOdbcDriver".&nbsp;&nbsp;By
default, however, the CoffeeMud  "fakedb" package is&nbsp;installed.&nbsp;
The driver name for this class is  "com.planet_ink.fakedb.Driver".&nbsp;
See the next section on "The CoffeeMud  Database" for more information.<br>
<br>
<em>DBSERVICE</em> <br>
This is the name  of the JDBC or ODBC Service as defined by your local operating
system.&nbsp; It  typically denotes the name of the ODBC service, or the
name of the database in  other instances.&nbsp; For a System&nbsp;ODBC service,
this value will typically  look like "jdbc:odbc:SystemServiceName".&nbsp;
By default, however, the fakedb  package is used.&nbsp; The format of the
service name for fakedb is  "jdbc:fakedb:DataPath".&nbsp; Where DataPath
is a local drive path containing  the "fakedb.schema" file, where your flat
data files will be created.&nbsp; See  the section on "The CoffeeMud Database"
for more information.<br>
<br>
<em>DBUSER,  DBPASS <br>
</em>This specifies the name and password which may or may not be  required
to log into your ODBC service, or database.&nbsp; Not required for  fakedb,
and thus blank by default.</p>
 
<p align="left"><em>DBCONNECTIONS<br>
</em>This &nbsp;is the number of independent connections to  make to the
database through your JDBC/ODBC driver.&nbsp; 1 or 2 is  plenty.&nbsp; CoffeeMud
is not&nbsp;especially database intensive. </p>
<p align="left"><em>                                * In Addition to the
above, you will find other numerous flags and  settings which allow you to
better customize your CoffeeMud.&nbsp; Make sure you&nbsp;check  out the
Control Panel feature in the MUDGrinder to modify them.&nbsp;</em>&nbsp;&nbsp;
                           </p>
<p> <img src="images/hd.jpg">
 </p>
<p><strong><font size="5">The CoffeeMud Package:</font></strong></p>
 
<p align="left">Here is a summary of the directories inside the CoffeeMud
package,  along with some of the important files you may want to edit when
configuring your server.</p>
 <img src="images/dir-com.jpg">
 
<p>The directories inside the <strong>com</strong>     directory contain
all the Java Class files,  which are the executable portion of CoffeeMud.
 All of the Java source  files are also found herein.</p>
 <img src="images/dir-guides.jpg">
 
<p>The <strong>guides</strong>  directory is where you'll find this document,
as well as other HTML documents you may find helpful in configuring your
server as well as building areas inside it.</p>
 
<p>The  <strong>guides/database</strong>   directory is where you'll find
several SQL scripts necessary to configuring another database engine, such
as SQL Server, MySQL, PostGRE, Access, and others.</p>
 
<p>The <strong>guides/images</strong>   directory contains image files used
inside the HTML files in  the guides directory.</p>
 <img src="images/dir-lib.jpg">
 
<p>The <strong>lib</strong> directory holds any external libraries or components
necessary  to run CoffeeMud, but not necessarily part of the CoffeeMud source
proper.  For instance,  this directory holds the Mozilla Rhino Javascript
library jar file, called js.jar.</p>
 <img src="images/dir-web.jpg">
 
<p>The <strong>web</strong>  directory is where you'll find several important
files related to the configuration of the two default web servers: admin,
and public (pub): &nbsp;You may want to edit them at some point, or not.
&nbsp;It's up to you. &nbsp;You'll probably be happier if you at least look
them over so you know what settings you CAN edit.</p>
 
<table width="100%" border="1">
 <tbody>
    <tr>
      <td valign="top"><i>admin.ini</i></td>
      <td valign="top"> The configuration file for the admin web server.
 This is the server which, by default, governs the MUDGrinder and other server
administrative pages and utilities.</td>
    </tr>
 <tr>
      <td valign="top"><i>common.ini</i></td>
      <td valign="top"> The configuration file for certain settings common
to both  the admin and public web servers.</td>
    </tr>
 <tr>
      <td valign="top"><i>pub.ini</i></td>
      <td valign="top"> The configuration file for the public web server.</td>
    </tr>
 <tr>
      <td valign="top"><i>email.ini</i></td>
      <td valign="top"> The configuration file for the smtp server.</td>
    </tr>
 
  </tbody>
</table>
 
<p>The <strong>admin</strong> directory is where the pages made available
by the admin web server are found, by default.  This directory also contains
the <strong>admin/images</strong> to store image files displayed by the admin
pages, as well as the <strong>admin/grinder</strong> directory, where the
MUDGrinder pages are stored by default.</p>
 
<p>The <strong>admin.templates</strong> directory is where the default error
page for the admin web server is found.</p>
 
<p>The <strong>pub</strong> directory is where the pages made available by
the pub web server are found, by default.  This directory also contains the
<strong>pub/images</strong> to store image files displayed by the public
web pages, as well as the <strong>pub/sounds</strong> directory where MSP
sound files are stored for players to access.</p>
 
<p>The <strong>pub.templates</strong> directory is where the default error
page for the pub web server is found.</p>
 <img src="images/dir-resources.jpg">
 
<p>The <strong>resources</strong>  directory is where you'll find most of
the important files for tinkering with the configuration of several aspects
of your system.  Some of these files are in the resources directory itself,
and some are in its subdirectories.&nbsp;  The important files found in the
resources directory are:</p>
 
<table width="100%" border="1">
 <tbody>
    <tr>
      <td valign="top" width="25%"><i>chat.dat</i></td>
      <td valign="top" width="75%"> The configuration file for the MudChat
behavior. &nbsp;You can edit this one too.</td>
    </tr>
 <tr>
      <td valign="top" width="25%"><i>laws.ini</i></td>
      <td valign="top" width="75%"> The default configuration file for the
Arrest behavior. &nbsp;You can edit this, but its easier to deal with law
through law books.</td>
    </tr>
 <tr>
      <td valign="top" width="25%"><i>lawtoc.ini</i></td>
      <td valign="top" width="75%"> The default pages file for the GenLawBook
item.</td>
    </tr>
 <tr>
      <td valign="top" width="25%"><i>alignment.ini</i></td>
      <td valign="top" width="75%"> The default faction configuration file
for player alignments. &nbsp;There are command line tools for factions.</td>
    </tr>
 <tr>
      <td valign="top" width="25%"><i>movingroom.xml</i></td>
      <td valign="top" width="75%"> A sample configuration file for the MovingRoom
behavior.</td>
    </tr>
 <tr>
      <td valign="top" width="25%"><i>socials.txt</i></td>
      <td valign="top" width="75%"> The text file holding all of the socials.
&nbsp;There is a command line tool for updating this file.</td>
    </tr>
 <tr>
      <td valign="top" width="25%"><i>mxp_images.txt</i></td>
      <td valign="top" width="75%">A definition table for the default image
files used for mxp clients.</td>
    </tr>
 
  </tbody>
</table>
 
<p>The <strong>resources/fakedb</strong>  directory is where all area, room,
mob, journal, and player data is stored when the FAKEDB system is being used.
 When FAKEDB is not being used, this directory is unused.</p>
 
<p>The <strong>resources/examples</strong>  directory is where you'll find
sample files for a variety of things. It  contains a cmare file with some
example deities to load into  your mud. Use the import command to load this
set of mobs.&nbsp; It also contains a sample faction ini file called "reputation.ini",
which  you may put into the proper tag in your coffeemud.ini file to make
use of, as well as  a template file for use when new factions are created.
 It also  contains a sample MOB class written in javascript.  Use LOAD MOB
resources/examples/Lemming.js to  load it up.</p>
 
<p>The <strong>resources/help</strong> directory is where you'll find all
of the files responsible for the numerous standard and archon HELP entries.
 It also contains the two text files shown when help and ahelp are entered
without parameters.  The *.ini files are formatted as java property files,
meaning that they are in ENTRY=VALUE format.  The VALUE may span several
lines, so long as it ends with a backslash \</p>
 
<p>The <strong>resources/progs</strong> directory contains several sample
MOBPROG files loadable using the Scriptable behavior.</p>
 
<p>The <strong>resources/quests</strong> directory contains several sample
quests.  Each quest is in its own directory, along with any supporting Scriptable
*.script files, and any supporting mob or item *.cmare files.  The CREATE
QUEST command is used to load each of these *.quest files.  Quests may also
be loaded via the MUDGrinder.</p>
 
<p>The <strong>resources/scripts</strong> directory will some day contain
directories for each of the human languages CoffeeMud has been translated
into.  At present, only the EN_TX (English) directory exists, with some accompanying
text files containing strings used  in CoffeeMud.  This set of strings is
quite incomplete.</p>
 
<p>The <strong>resources/skills</strong> directory contains the database
of recipes used by the Common skills in CoffeeMud.  Each text file contains
recipe for a single skill, and each is formatted in tab-delimited format,
with rows seperated by carriage returns.</p>
 
<p>The <strong>resources/text</strong> directory contains several text files
displayed at different points in the CoffeeMud engine.  Feel free to load
these into a text editor and have at them. &nbsp;A summary is as follows:</p>
 
<table width="100%" border="1">
 <tbody>
    <tr>
      <td valign="top"><i>alignment.txt</i></td>
      <td valign="top"> A text file describing alignment to new players.</td>
    </tr>
 <tr>
      <td valign="top"><i>classes.txt</i></td>
      <td valign="top">A text file describing class selections for new players.</td>
    </tr>
 <tr>
      <td valign="top"><i>credits.txt</i></td>
      <td valign="top">The text file shown to users who use the CREDITS command.</td>
    </tr>
 <tr>
      <td valign="top"><i>down.txt</i></td>
      <td valign="top">The text file displayed to users only when the OffLine
application is running.</td>
    </tr>
 <tr>
      <td valign="top"><i>intro.txt</i></td>
      <td valign="top">The text file displayed to users when they connect
to your mud.</td>
    </tr>
 <tr>
      <td valign="top"><i>mxp.txt</i></td>
      <td valign="top">A text file containing the complete MXP dictionary.
 See <a href="http://www.zuggsoft.com/zmud/mxp.htm">http://www.zuggsoft.com/zmud/mxp.htm</a>
for more information on this feature.</td>
    </tr>
 <tr>
      <td valign="top"><i>newchar.txt</i></td>
      <td valign="top">A text file introducing your mud to new players.</td>
    </tr>
 <tr>
      <td valign="top"><i>offline.txt</i></td>
      <td valign="top">A text file shown to players while your mud is booting.</td>
    </tr>
 <tr>
      <td valign="top"><i>races.txt</i></td>
      <td valign="top">A text file describing race selections to new players.</td>
    </tr>
 <tr>
      <td valign="top"><i>stats.txt</i></td>
      <td valign="top">A text file describing the basic stats to new players</td>
    </tr>
 <tr>
      <td valign="top"><i>motd.txt</i></td>
      <td valign="top">A text file shown to users when they        log on.
The existence of this file activates MOTD command, as well as the       
MOTD entry in the CONFIG command.&nbsp; Of course, since CoffeeMud News  
     journals are also displayed at boot time, and their subjects may be
       prefixed with MOTD, MOTM, or MOTY to make their redisplay perpetual,
there        really is no good reason to use this feature as an Message Of
The Day per        se.&nbsp; Instead, this file is best used for fancy introductions
to your        mud, or congratulations for having figured out how to log
in    perhaps.</td>
                                                                        
                                                                         
 </tr>
                              
  </tbody>
</table>
 
<p> <img src="images/db.jpg">
 </p>
<p><strong><font size="5">The CoffeeMud Database:</font></strong></p>
 
<p align="left">CoffeeMud requires a database for  operation.&nbsp; A database
is simply the place where all the rooms, items,  monsters, players, pets,
and other information is stored on the computer.&nbsp;  Without the database,
you would have to start all over from scratch every time  you booted the
MUD Server.&nbsp; And we all know that would be bad.</p>
 
<p align="left">By default, CoffeeMud uses a custom JDBC flat-file database
called  "fakedb".&nbsp; FakeDB stores its data into text formatted files
inside the  "resources/fakedb" directory of your CoffeeMud package.&nbsp;
FakeDB is rather slow, and  hardly a powerful or professional database system,
but it is quite sufficient  for CoffeeMud, and performs well the small tasks
it was designed for.&nbsp; </p>
 
<p align="left">For the more adventurous, CoffeeMud supports  any JDBC or
ODBC compliant database system.&nbsp; This  includes such systems as Microsoft
Access, Microsoft SQL Server, PostGRE  SQL, MySQL, Oracle, IBM DB2, and others.&nbsp;
While this document cannot cover the  step by step installation instructions
for each of these systems, it can  be pointed out that everything you need
has been provided.&nbsp; Inside the "guides/database/"  directory of your
CoffeeMud package, you will find&nbsp;several  files: "coffeemuddb.sql",
"coffeemuddb2.sql", "coffeemuddbaccess.sql", "coffeemudibmdb2.sql", "coffeemuddbmysql.sql",
"coffeemuddbpsql.sql",  "coffeemuddbh.sql", "coffeemuddderby.sql", and "fakedb.schema".&nbsp;
The  first&nbsp;five are SQL Scripts which can be used to create the necessary
tables  in Microsoft SQL Server ("coffeemuddb2.sql"), MySQL ("coffeemuddbmysql.sql"),&nbsp;Access
("coffeemuddbaccess.sql"), PostGRE ("coffeemuddbpsql.sql"), Derby ("coffeemuddbderby.sql"),
HSQLDB ("coffeemuddbh.sql"), IBM DB2 ("coffeemudibmdb2.sql")and some of  the
others.&nbsp; The last is a copy of the same fakedb file from your "resources/fakedb"
 directory, in case it becomes corrupted.&nbsp; Although the manner in which
the  SQL Scripts are used may differ from system to system, they cannot all
be  covered here.&nbsp; Some of the scripts may need to be changed slightly
to work  with some systems.&nbsp; Some systems will require each SQL Statement
be issued  independently instead of as part of a larger script.&nbsp; Please
consult your  database documentation for more information on this.</p>
 
<p align="left">                                             In order to
 use your database with CoffeeMud, as specified in the section on Settings,
you  must provide CoffeeMud with a JDBC compliant Driver class.&nbsp; In
many cases, you  will be creating a System ODBC Data Source.&nbsp; When this
is the case,  the driver "sun.jdbc.odbc.JdbcOdbcDriver" may be used to access
the database.&nbsp;</p>
 
<p align="left">Some systems, however, such as MySQL, IBM DB2, and Microsoft
SQL Server  2000, have native JDBC Drivers which may be used instead of the
general ODBC  Driver.&nbsp; These native JDBC Drivers tend to be far superior
to their ODBC  counterparts, and are highly recommended.</p>
 
<p align="left">The care and feeding of the tables used by CoffeeMud should
be  very low.&nbsp; The database will grow along with the areas created,
and along  with the number of players which join your MUD.&nbsp; All of this
growth can be  managed, however, within CoffeeMud itself, by your Archon
administrative  user.&nbsp; You should not need to, nor should you attempt
to affect individual  rows in your database for any reason.</p>
 
<p align="left"><em><strong>Installing  and using Microsoft Access with CoffeeMud
on a Windows machine</strong>           </em></p>
 
<p align="left"><strong>1.</strong> Open up Microsoft Access and select to
create  a Blank Access Database.&nbsp; Give the database a name and save
it on your hard  drive.</p>
 
<p align="left"><strong>2.</strong> Under Objects, select the Queries section
and  select Create Query in Design View.&nbsp; When the dialog box appears,
click the  close button.</p>
 
<p align="left"><strong>3.</strong> Now right click on the large grey area
and  select "SQL View" from the context Menu.</p>
 
<p align="left"><strong>4.</strong> Inside your CoffeeMud/guides/database
folder,  open up the coffeemuddbaccess.sql file using Notepad.&nbsp; You
will see that the  file contains numerous blocks of sql text.&nbsp; Each
block begins with CREATE  TABLE, and ends with a semicolon ); </p>
 
<p align="left"><strong>5.</strong> Select the first block of text in your
sql  file, from the first CREATE TABLE line down through the ); line, and
select Copy  from Notepad.&nbsp; Paste this block into the Select Query area
in Microsoft  Access.&nbsp; Paste it over any other text that may be in there.</p>
 
<p align="left"><strong>6.</strong> Press the "!" symbol at the top to execute
the  block of sql script.</p>
 
<p align="left"><strong>7.</strong> Repeat steps 5 and 6 for the remaining
CREATE  TABLE blocks in the coffeemuddb2.sql file.</p>
 
<p align="left"><strong>8.</strong> Now go to your Windows Control Panel
(under  XP, switch to Classic View)&nbsp; and double-click the <font
 face="Courier New, Courier, mono">ODBC Data Sources (32-bit)</font> icon.&nbsp;
 If you are using Windows 2000 or XP, double-click the <font
 face="Courier New, Courier, mono">Administrative Tools</font> option. Then
 select the <font face="Courier New, Courier, mono">Data Sources (ODBC)</font>
 icon.</p>
 
<p><strong>9.</strong> Now, click on the <font
 face="Courier New, Courier, mono">System DSN</font> tab. Click the <font
 face="Courier New, Courier, mono">Add</font> button. This will present you
with  a list of drivers. Select "<font face="Courier New, Courier, mono">Microsoft
 Access Driver (*.mdb)</font>"</p>
 
<p><strong>10.</strong> Here you should probably name the data source something
 sensical, like <font face="Courier New, Courier, mono">CoffeeMudData</font>
or  the like. Under <font face="Courier New, Courier, mono">Database</font>,
click  <font face="Courier New, Courier, mono">Select</font>. Locate and
select your  <font face="Courier New, Courier, mono">CoffeeMud.mdb</font>
file that you saved  in step 1. Click OK and then OK to get all the way back
out of things.</p>
 
<p><strong>11. </strong>Open coffeemud.CMVars. Go to where it says "ODBC
Database  fields". That section should instead look like this:</p>
 
<p><font face="Courier New, Courier, mono">#------------------------<br>
# ODBC  Database fields<br>
#------------------------<br>
# DBCLASS is the name of the  ODBC Driver, typically sun.jdbc.odbc.JdbcOdbcDriver<br>
# DBSERVICE is the name  of the ODBC Service as defined by your local operating
system<br>
# DBUSER is a  user name required to log into the ODBC service<br>
# DBPASS is the password for  the above user name<br>
# DBCONNECTIONS is the number of independent connections  to make to the
 database<br>
DBCLASS=sun.jdbc.odbc.JdbcOdbcDriver<br>
DBSERVICE=jdbc:odbc:<i>CoffeeMudData</i><br>
DBUSER=<br>
DBPASS=<br>
DBCONNECTIONS=1</font></p>
 
<p>Where it says "<font face="Courier New, Courier, mono">jdbc:odbc:CoffeeMudData</font>",
make sure the  part after "<font face="Courier New, Courier, mono">jdbc:odbc:</font>"
 matches the DNS name you made earlier.&nbsp; Make sure your DBCONNECTIONS
is  never set above 1&nbsp;when using Microsoft&nbsp;Access.&nbsp; Now, reboot
CoffeeMud, and you are done!</p>
 
<p align="left"><em><strong>Installing  and using MySQL with CoffeeMud on
a Windows machine</strong>          </em></p>
 
<p align="left"><strong>1. </strong>  Go to <a
 class="moz-txt-link-abbreviated" href="http://www.mysql.com">www.mysql.com</a>,
click on Downloads (one of the  tabs at the very top), scroll down under
"MySQL database server &amp; Standard  Clients:"&nbsp;and click on MySQL
4.0 -- Production release (recommended).  Scroll down to "Windows downloads",
you will see Windows 95/98/NT/2000/XP, and  click on the "Pick a mirror"
link to the right, and choose a place to  download&nbsp;from.. You will be
promted to save a file called  "mysql-4.0.1.2-win.zip" (or whatever the newest
version is). Save that to a temp  folder (WARNING, the file is about 21 megs!).<br>
<br>
<strong>2. </strong>  Go back to the  Downloads tab, this time scroll down
to "Application Programming Interfaces  (APIs), and click on "MySQL Connector
/J -- for connecting to MySQL from Java".  On the next screen, click on "MySQL
Connector /J3.0 -- production release". On  the next page, click on the download
link for "Source and Binaries (zip)" ( be  SURE to get the&nbsp;ZIP file,
not the (tar.gz)!) The file name should be  "mysql-connector-java-3.0.7-stable.zip".
Again, save this file to&nbsp;your temp  folder as well.</p>
 
<p align="left"><strong>3. </strong>  Locate the mysql-4.0.1.2-win.zip file
you downloaded and  unzip it ( if you dont know how to do that..I dont think
running a mud  should&nbsp;be on your list of priorities...) and run the
setup.exe file there.  Just hit Next<br>
for all the prompts, and it should install to c:\mysql by  default.<br>
<br>
<strong>4. </strong>  Go to your coffeemud folder, open the guides\database
 folder, and you will see a file called "coffeemuddbmysql.sql". Open that
 file&nbsp;with a text editor or notepad etc... (you might want to make a
backup  copy<br>
first...) Now, add the following:<br>
<br>
<font face="Courier New">#  Connection: SQL<br>
# Host: localhost<br>
# Saved: 2003-04-01 00:29:14<br>
#<br>
#  Connection: SQL<br>
# Host: localhost<br>
# Saved: 2003-04-01 00:27:39<br>
#<br>
use  coffeemud&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 &lt;----ADD THIS LINE!<br>
CREATE TABLE CMCHAB (<br>
CMUSERID char (50) NULL  ,<br>
CMABID char (50) NULL ,<br>
CMABPF int NULL ,<br>
CMABTX text  NULL<br>
</font>etc..<br>
etc..<br>
<br>
Now copy the edited coffeemuddbmysql.sql to  your c:\mysql\bin folder.<br>
<br>
<strong>5. </strong>  Now, open a DOS window (Start &gt; Run  &gt; type "command"
and hit enter) and type cd c:\mysql\bin and hit Enter. Your  prompt should
now be c:\mysql\bin&gt; then type "mysqld" (notice the d on the  end..?).
After&nbsp; a few moments, it should start up the mysql server. You  wont
get a new window or icon or anything, I check it by <br>
doing CTRL-ALT-DEL  and see if Mysqld is listed in the Close Program Window.
If it's there, you're  in business, and MySQL is running in the background.
You should now be back to  the c:\mysql\bin&gt; prompt. Type "mysql" and
enter. You&nbsp;should get a  Welcome to the MySQL monitor etc. etc. etc..
and now the prompt should simply  say "mysql&gt;" . Now type "create database
coffeemud;" (please note the  semi-colon";"!!!) and hit enter. You should
get "Query OK, 1 row affected  &lt;0.11sec)" or something like that... then
type "\q" and that should quit you  out of the monitor.<br>
<br>
<strong>6. </strong>  Now that your out of the monitor, you should  be back
to the c:\mysql\bin&gt; prompt. Now type "mysql &lt;  coffeemuddbmysql.sql"&nbsp;
(without the quotes of course) and hit enter...  again, after a moment or
2, it SHOULD<br>
return you to the c:\mysql\bin&gt;  prompt. Go ahead and close that window
now. In theory, you should now have mysql  running and a coffeemud database&nbsp;all
set for it to access.<br>
<br>
<strong>7.  </strong>   Now go to your coffeemud folder and open your coffeemud.ini
file in notepad or  some text editor, and look for the section that says:<br>
<font face="Courier New">DBCLASS=com.planet_ink.fakedb.Driver<br>
DBSERVICE=jdbc:fakedb:resources/data<br>
DBUSER=<br>
DBPASS=<br>
DBCONNECTIONS=2<br>
</font><br>
and  change it to:<br>
<br>
<font face="Courier New">DBCLASS=com.mysql.jdbc.Driver<br>
DBSERVICE=jdbc:mysql://localhost/coffeemud<br>
DBUSER=<br>
DBPASS=<br>
DBCONNECTIONS=4<br>
</font><br>
<strong>8. </strong>   Go back to the other file you downloaded in STEP 2,
 mysql-connector-java-3.0.7-stable.zip, and now extract that into a temp
folder.  Inside, there should be a "mysql-connector-java-3.0.7-stable" folder
and inside  that, a "com" folder, and inside THAT, a "mysql" folder. Copy
the mysql folder  over into your c:\coffeemud\com folder. So now inside c:\coffeemud\com,
ther  should be 2 folders, one called <font face="Courier New">mysql</font>,
and one  called <font face="Courier New">planet_ink</font>.</p>
 
<p align="left"><strong>9. </strong>  Now, with mysqld still running in the
background, just  launch the mud.bat AS IT IS to start the mud..( I didnt
have to make ANY changes  in there for this to work, hopefully the same for
you...)<br>
</p>
 
<p><em><strong>Installing and using  MySQL with CoffeeMud on a UN*X or Linux
machine</strong>            </em></p>
 
<p><strong>1.</strong> Download and install mysql from <a
 href="http://www.mysql.com/downloads/index.html">http://www.mysql.com/downloads/index.html</a>.
 Make sure mysqld is being run at boot time, and not by the root user. </p>
 
<p><strong>2.</strong>&nbsp;Download and install the mysql jdbc api from
<a href="http://www.mysql.com/downloads/api-jdbc-stable.html">http://www.mysql.com/downloads/api-jdbc-stable.html</a>.&nbsp;Extract
 the .tar.gz file to a temporary directory.&nbsp;Then copy the extracted
 /com/mysql/ directory (not just its contents) into /CoffeeMud/com/.</p>
 
<p><strong>3.</strong> Create a coffeemud database from the shell as root
type,  "mysqladmin create coffeemud" (in this example we name the db  coffeemud).&nbsp;If
you screw up, or need to delete the new db for some reason,  you can always
do a "mysqladmin drop coffeemud". </p>
 
<p><strong>4.</strong> Create a user for the new database (user in this example
 is called coffee).&nbsp; As root, type "mysql" into the shell. Now enter:
GRANT  ALL ON coffeemud.* TO coffee@localhost IDENTIFIED BY "password";&nbsp;&nbsp;
 Enter a password for the user inside the quotes.&nbsp;Now type, "quit".
</p>
 
<p><strong>5.</strong> Edit the file CoffeeMud/guides/coffeemuddbmysql.sql
like  so:&nbsp;at line 9 insert "use coffeemud" (assuming the new db is called
 coffeemud). Then save the changes. </p>
 
<p><strong>6.</strong> Run the SQL file as follows:&nbsp;from the shell type,
 "mysql &lt; coffeemuddbmysql.sql" </p>
 
<p><strong>7.</strong> Edit the following settings in CoffeeMud/coffeemud.ini:
 <br>
DBCLASS=com.mysql.jdbc.Driver <br>
DBSERVICE=jdbc:mysql://localhost/coffeemud  <br>
DBUSER=coffee <br>
DBPASS=password <br>
DBCONNECTIONS=4 </p>
 
<p>(no quotes on the password here)<br>
Save your changes and fire up  CoffeeMud!</p>
 
<p><strong><em>Installing and using HSQLDB</em></strong> <strong><em>with
 CoffeeMud on a UN*X or Linux machine</em></strong></p>
   <b>1.</b>   <font size="3">Get the database software</font>   
<p>Go to <a href="http://sourceforge.net/projects/hsqldb/">http://sourceforge.net/projects/hsqldb/</a>
   and download the applicable archive. </p>
   <b>2.</b>   <font size="3">Putting HSQLDB into the classpath</font>  
<p>Go into the archive that was just downloaded. Extract the file hsqldb.jar.
   This file needs to be placed into the classpath. I merely placed it in
   "&lt;JRE install path&gt;\lib\ext" (C:\Program Files\Java\j2re1.4.2_06\lib\ext
   on my system) </p>
   <b>3.</b>   <font size="3">Creating the coffeemud database</font>   
<p>Open a command window and navigate to the root of the CoffeeMUD install
   directory. </p>
   
<p>Create the directory for the database to reside in by executing the  
 following command (or wherever you want to call it): </p>
<pre>mkdir coffeemud</pre>
   
<p>Now navigate into the newly created directory. </p>
   
<p>Next, issue the following command to start the database interface. </p>
<pre>java org.hsqldb.util.DatabaseManager</pre>
   
<p>The system will respond by bringing up a small GUI application. </p>
   
<p>Now we need to set up the correct parameters to create the database. The
   final parameter of the URL is the name of the database </p>
<pre>Type: HSQL Database Engine Standalone<br>Driver: org.hsqldb.jdbcDriver<br>URL: jdbc:hsqldb:file:coffeemud<br>User: &lt;whatever you want&gt;<br>Password: &lt;whatever you want&gt;<br></pre>
   
<p>Now that the values have been filled in click ok. </p>
   
<p>The tables necessary for CoffeeMUD can be setup by: </p>
<pre>	Open File Menu.<br>	Select Open Script.<br>	Find and open the coffeemuddbh.sql file in the CoffeeMUD\guides\database directory.<br>	The script will then be loaded into the small text box on the upper right.<br>	Click the Execute button.<br>	The system should return with and update count of 0.<br></pre>
   
<p>Now to shutdown the database and exit this utility: </p>
<pre>	Open Command Menu.<br>	Select SHUTDOWN.<br>	Click the Execute Button.<br>	Open the File Menu.<br>	Select Exit.<br></pre>
   
<p>The coffeemud database will exist in the folder where the DatabaseManager
   utility was run. </p>
   <b>4.</b>   <font size="3">Setup CoffeeMUD to use the correct driver</font> 
  
<p>Open coffeemud.ini and scroll down to the ODBC Database fields section.
   Comment out the current settings (place a # in front of them) and add
the    following lines below them: </p>
<pre>#here are the settings for HSQLDB<br>DBCLASS=org.hsqldb.jdbcDriver<br>DBSERVICE=jdbc:hsqldb:file:coffeemud/coffeemud<br>DBUSER=sa<br>DBPASS=<br>DBCONNECTIONS=4<br></pre>
   
<p>The file: parameter of the DBSERVICE is the path to the database (relative
   from the root of the coffeemud directory) followed by the name of the
   database. </p>
 
<p>   <b>5.</b>   <font size="3">Smile, you are done.</font> </p>
 
<p><strong><em>Installing and using Derby (IBM Cloudscape) for Windows or
 *nix</em></strong></p>
 <b>1.</b>&nbsp;Get the database software   
<p>Go to <a href="http://sourceforge.net/cloudscape_download_choose.php">http://db.apache.org/derby/derby_downloads.html#Latest+Official+Release</a>
   and download the applicable installer (I used the Java installer). </p>
   <b>2.</b>&nbsp;Install the database software   
<p>Follow the instructions included with the installer. </p>
 <b>3.</b>&nbsp;Putting Derby into the classpath   
<p>Derby.jar and Derbytools.jar must be placed into the classpath for them
to    be of any use. These archives live in the lib subfolder of the path
where    Derby was installed. They can be placed into the root of the CoffeeMUD
folder    or they can be placed into "&lt;JRE install path&gt;\lib\ext" (C:\Program
   Files\Java\j2re1.4.2_06\lib\ext on my system) </p>
 <b>4.</b> Creating the coffeemud database   
<p>Open a command window and navigate to the root of the CoffeeMUD install
   directory. Issue the following command to start the database interface.
</p>
<pre>java org.apache.derby.tools.ij</pre>
   
<p>The system will respond with: </p>
<pre>ij version 10.0 (C) Copyright IBM Corp. 1997, 2004.<br>ij&gt;<br></pre>
   
<p>Now we will issue the command that will create the database. </p>
<pre>connect 'jdbc:derby:coffeemud;create=true';</pre>
   
<p>After a time the ij&gt; prompt will return. Now to run the SQL that will
   set up the tables: </p>
<pre>run '.\guides\database\coffeemuddbderby.sql';</pre>
   
<p>A description of all of the tables created will fill up the window.  
 Finally, we must disconnect from the database and exit the utility. </p>
<pre>disconnect;<br>exit;</pre>
   
<p>The coffeemud database will exist in a folder called 'coffeemud' in the
   current working directory, and if CoffeeMUD is to find it this must be
the    root of the coffeemud install. </p>
   <b>5.</b> Setup CoffeeMUD to use the correct driver   
<p>Open coffeemud.ini and scroll down to the ODBC Database fields section.
   Comment out the current settings (place a # in front of them) and add
the    following lines below them: </p>
<pre>#here are the settings for IBM Cloudscape(Derby)<br>DBCLASS=org.apache.derby.jdbc.EmbeddedDriver<br>DBSERVICE=jdbc:derby:coffeemud<br>DBCONNECTIONS=2<br></pre>
 <b>6.</b>Smile, you are done... well mostly   
<p>Currently there are some minor changes that must be made to the code for
   Derby to work properly. </p>
   <b></b><b>8.</b>Change?   
<p>This step is not really necessary, it just makes things cleaner. Currently
   when CoffeeMUD is shut down it does not exit the database properly, I
have not    yet worked out a good way to fix this, however, the following
will work: </p>
   
<p>Open DBConnection.java in your text editor of choice. Goto the    close()
function. </p>
   
<p>change </p>
<pre>if(myConnection!=null)<br>	myConnection.close();<br></pre>
   
<p>into </p>
<pre>if(myConnection!=null)<br>{<br>	try<br>	{<br>	   DriverManager.getConnection("jdbc:derby:;shutdown=true");<br>	}<br>	catch (SQLException se)<br>	{<br>	}<br>}<br></pre>
   
<p>Now recompile the source and it will work like a dream... </p>
   <b>9.</b>Increasing performance   
<p>The basic settings for Derby end up in it being about half the speed of
   other databases. The method to correct this is simple, however, it is
very    memory intensive (I upped the maximum memory for CoffeeMUD to 512
Megs, it    really only uses about 300 Megs...)    </p>
<p>   </p>
<p>Before running step 4 (the creation of the database), create a file called
   'derby.properties' in the root CoffeeMUD directory. This file should contain:
   </p>
<pre># derby.properties<br>#<br>derby.storage.pageSize=32768<br>derby.storage.pageCacheSize=10000<br></pre>
   
<p>When the coffeemud database is created this time it will run at about
the    same speed as other databases. More information on these properties
can be    found at &lt;Derby Install Path&gt;\doc\pdf\tuning.pdf. </p>
   
<p></p>
 
<p> <img src="images/nuked.jpg">
 </p>
<p><strong><font size="5">The OffLine And Shutdown Applications:</font></strong></p>
 
<p align="left"> In the off chance you should need to keep your mud down
while database, or other software (or hardware?) maintenance is going on,
a&nbsp;small footprint&nbsp;OffLine application is available.  This application
will read the port information from your coffeemud.ini file just like the
regular mud server.  It will accept connections, but only to display the
file resources/text/down.txt before disconnecting the user automatically.
 To execute this application, you should go into your coffeemud directory
and enter:</p>
<p> </p>
<pre>java com.planet_ink.coffee_mud.application.OffLine<br></pre>
<p> The Shutdown application is a means of shutting down  your MUD remotely
without logging in. It is part of the application package of  CoffeeMud,
but it does not rely on any of the other internal classes.&nbsp; You  may
therefore, if you like, copy the file Shutdown.class&nbsp;onto a floppy disk
 and execute it from there, so long as the file is stored in  a com/planet_ink/coffee_mud/application
folder or directory.&nbsp;  </p>
 
<p>The Shutdown application requires that you pass to it  the URL of your
server, the standard MUD port to connect to, the login name of a valid Archon
character, and the password.&nbsp;  You may optionally also include the word
'true' if you wish the system to reboot  instead of simply shutting down.&nbsp;
To execute this application, you should go into  your coffeemud directory
or wherever the "com" directory for CoffeeMud is located, and  enter:</p>
<pre>java com.planet_ink.coffee_mud.application.Shutdown localhost 5555 AdminName AdminPassword<br></pre>
 
<p> </p>
 
<p> </p>
 <br>
</body>
</html>
